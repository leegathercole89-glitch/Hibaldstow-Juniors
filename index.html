<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hibaldstow Juniors FC</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">

  <!-- PWA / Installable App Setup -->
  <link rel="manifest" href="data:application/manifest+json,{
    \"name\":\"Hibaldstow Juniors FC\",
    \"short_name\":\"Hibaldstow\",
    \"icons\":[{\"src\":\"assets/images/splash.jpg","sizes\":\"192x192\",\"type\":\"image/jpeg\"},{\"src\":\"assets/images/splash.jpg","sizes\":\"512x512\",\"type\":\"image/jpeg\"}],
    \"start_url\":\".\",
    \"background_color\":\"#2d1b69\",
    \"theme_color\":\"#ff6b35\",
    \"display\":\"standalone\"
  }">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#2d1b69">
  <link rel="apple-touch-icon" href="assets/images/splash.jpg">

  <style>
    :root{--accent:#ff6b35;--bright:#4ecdc4;--fun:#ffe66d;--dark:#2d1b69}
   body{font-family:'Comic Neue',system-ui,sans-serif;margin:0;background:url("assets/images/homepage_image.jpg") center/cover no-repeat fixed; background-color:#0b1020;color:#2d1b69;min-height:100vh;overflow-x:hidden}


.container{max-width:1200px;margin:20px auto;padding:0 16px 220px}
    .grid{display:grid;gap:28px;grid-template-columns:1fr}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr 1fr}}

    .big-card{height:100%;background:white;border-radius:32px;padding:28px;box-shadow:0 15px 40px rgba(0,0,0,0.2);text-align:center;transition:0.3s;display:flex;flex-direction:column;justify-content:center;align-items:center}
    .big-card:hover{transform:translateY(-10px)}

    button{background:var(--accent);color:white;border:none;padding:18px 36px;border-radius:50px;font-size:1.8rem;font-weight:900;cursor:pointer;box-shadow:0 8px 25px rgba(255,107,53,0.5);transition:0.3s;margin:10px}
    button:hover{transform:scale(1.08)}

    .go-btn{background:#ff4757;padding:28px 70px;font-size:3rem;animation:bounce 1.8s infinite}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-25px)}}

    .home-img{max-width:100%;border-radius:24px;margin:20px 0;box-shadow:0 12px 35px rgba(0,0,0,0.25);transition:0.3s;cursor:pointer}
    .home-img:hover{transform:scale(1.04)}

    .card-with-signs{display:flex;gap:28px;align-items:stretch;height:100%;margin-left:-220px;}

    .signs{
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    .side-sign{width:320px;border-radius:28px;box-shadow:0 16px 45px rgba(0,0,0,0.35);object-fit:cover;}

    @media(max-width:900px){
      .card-with-signs{display:flex;gap:28px;align-items:stretch;height:100%;margin-left:-220px;flex-direction:column;}
      .signs{flex-direction:row;justify-content:center;}
      .side-sign{width:320px;border-radius:28px;box-shadow:0 16px 45px rgba(0,0,0,0.35);object-fit:cover;}
    }

    #splash{position:fixed;inset:0;background:var(--dark);display:flex;align-items:center;justify-content:center;z-index:99999;transition:opacity 1.5s}
    #splash img{max-width:95%;max-height:95vh;border-radius:24px;box-shadow:0 15px 50px rgba(0,0,0,0.6);object-fit:contain}

    /* Club Song is now a tile in the homepage grid (keep ID styling neutral) */
    #clubSongBtn{background:transparent;padding:0;font-size:inherit;animation:none}

    #photoGallery{position:fixed;inset:0;background:var(--dark);z-index:9999;display:none;flex-direction:column;padding:20px 10px;overflow-hidden;color:white;text-align:center}
    #photoGallery.active{display:flex}
    #photoGallery h2{font-size:2.8rem;margin:10px 0 20px}
    .gallery-scroll{flex:1;overflow-x:auto;scroll-snap-type:x mandatory;display:flex;gap:20px;padding:10px 0;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}
    .gallery-scroll::-webkit-scrollbar{display:none}
    .gallery-scroll img{height:39vh;max-width:90vw;object-fit:contain;border-radius:20px;flex-shrink:0;scroll-snap-align:center;box-shadow:0 15px 40px rgba(0,0,0,0.6);transition:transform 0.3s}
    .gallery-scroll img:hover{transform:scale(1.02)}
    .back-btn{background:#ff4757;padding:16px 40px;font-size:22px;border-radius:50px;margin-top:15px}

    #quizScreen{position:fixed;inset:0;background:var(--dark);z-index:9999;display:none;color:white;flex-direction:column;padding:40px 20px;overflow-y:auto;box-sizing:border-box;text-align:center}
    #quizScreen.active{display:flex}
    #quizTimer{font-size:3.5rem;font-weight:900;color:#ffe66d;margin:20px 0;animation:pulse 1s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}

    .overlay{position:fixed;inset:0;background:rgba(45,27,105,0.97);display:none;align-items:center;justify-content:center;z-index:9999}
    .overlay.active{display:flex}
    .overlay-card{background:white;color:var(--dark);padding:40px;border-radius:32px;max-width:90%;text-align:center}
    .menu-btn{background:var(--bright);color:var(--dark);margin:12px;padding:20px;font-size:1.8rem;width:80%}
    .videoMenu{position:fixed;inset:0;background:var(--dark);z-index:9999;display:none;color:white;flex-direction:column;padding:60px 20px 100px;overflow-y:auto;box-sizing:border-box;text-align:center}
    .videoMenu.active{display:flex}
    .videoMenu h2{margin:0 0 40px;font-size:38px;font-weight:900}
    .video-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;max-width:1000px;margin:0 auto}
    .video-thumb{background:#000;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.4);cursor:pointer;position:relative;transition:0.3s}
    .video-thumb:hover{transform:scale(1.05)}
    .video-thumb img{width:100%;display:block}
    .play-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:rgba(0,0,0,0.7);border-radius:50%;display:flex;align-items:center;justify-content:center}
    .play-icon::after{content:'';width:0;height:0;border-left:28px solid white;border-top:20px solid transparent;border-bottom:20px solid transparent;margin-left:8px}
    .video-title{margin-top:14px;font-size:18px;font-weight:700}
  
    #quizTimer.warn{animation:timerPulse 0.9s infinite}
    #quizTimer.danger{animation:timerPulse 0.6s infinite, timerShake 0.15s infinite}
    @keyframes timerPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}
    @keyframes timerShake{0%{transform:translateX(0)}25%{transform:translateX(-2px)}50%{transform:translateX(2px)}75%{transform:translateX(-2px)}100%{transform:translateX(0)}}

    /* Slideshow under gallery */
    .slideshow{margin:18px auto 0;max-width:1100px}
    .slideshow-frame{position:relative;border-radius:22px;overflow:hidden;box-shadow:0 15px 40px rgba(0,0,0,0.6);background:#000}
    .slideshow-frame img{width:100%;height:42vh;max-height:520px;object-fit:contain;display:block;background:#000}
    .slide-nav{
      position:absolute;top:50%;transform:translateY(-50%);
      border:none;border-radius:999px;
      width:56px;height:56px;
      font-size:34px;font-weight:900;cursor:pointer;
      background:rgba(0,0,0,0.55);color:#fff;
      box-shadow:0 10px 25px rgba(0,0,0,0.4);
    }
    #prevSlide{left:12px}
    #nextSlide{right:12px}
    .slideshow-controls{display:flex;gap:12px;justify-content:center;align-items:center;margin-top:12px;flex-wrap:wrap}
    .slide-btn{background:#16a34a;color:#fff;border:none;padding:14px 26px;border-radius:999px;font-size:18px;font-weight:900;cursor:pointer}
    .slide-counter{font-size:18px;font-weight:800;opacity:0.95}

    @media(max-width:900px){
      .slideshow-frame img{height:36vh}
      .slide-nav{width:48px;height:48px;font-size:30px}
    }

    /* Click-to-zoom (half-screen, bright, no dark overlay on image) */
    #imgZoomBackdrop{
  position:fixed;
  inset:0;
  background:transparent;   /* ‚Üê only change */
  display:none;
  z-index:99998;
}

    }
    #imgZoomBackdrop.active{display:block;}

    #photoGallery img.zoom-half{
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      width:60vw;
      height:60vh;
      object-fit:contain;
      background:transparent;
      padding:0;
      border-radius:16px;
      box-shadow:0 22px 60px rgba(0,0,0,0.45);
      z-index:99999;
      cursor:zoom-out;
      filter:none;
    }

    @media(max-width:900px){
      #photoGallery img.zoom-half{
        width:96vw;
        height:78vh;
      }
    }
  
/* --- Homepage redesign (no cards) --- */
.home-shell{
  width:100%;
  max-width:1200px;
  margin:0 auto;
  padding:18px 16px 10px;
  background:rgba(255,255,255,0.10);
  border:1px solid rgba(255,255,255,0.16);
  border-radius:26px;
  box-shadow:0 18px 60px rgba(0,0,0,0.35);
  backdrop-filter: blur(6px);
}
.sign-strip{
  display:flex;
  gap:18px;
  justify-content:flex-end;
  align-items:flex-start;
  margin-bottom:16px;
  flex-wrap:wrap;
}
.sign-strip .side-sign{
  width:220px;          /* smaller than full posters, still visible */
  border-radius:22px;
  box-shadow:0 14px 40px rgba(0,0,0,0.35);
}

.home-actions{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:22px;
  align-items:start;
}

.home-tile{
  position:relative;
  border-radius:22px;
  overflow:hidden;
  box-shadow:0 14px 40px rgba(0,0,0,0.35);
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.18);
}

.home-tile img.home-img{
  width:100%;
  height:auto;
  display:block;
  margin:0;
  border-radius:0;
  box-shadow:none;
}

.tile-caption{
  position:absolute;
  left:14px;
  bottom:12px;
  background:rgba(0,0,0,0.55);
  color:#fff;
  padding:10px 14px;
  border-radius:999px;
  font-weight:900;
  font-size:18px;
}

.videos-wrap{
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:220px;
  padding:18px;
  border-radius:22px;
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.18);
  box-shadow:0 14px 40px rgba(0,0,0,0.35);
}

@media(max-width:900px){
  .home-actions{grid-template-columns:1fr}
  .sign-strip{justify-content:center}
  .sign-strip .side-sign{width:170px}
}

  
/* --- New homepage: bottom strip layout (no visible card) --- */
.home-stage{
  height: calc(100vh - 140px);
  min-height: 360px;
}

/* --- Concept 1: tidy grid homepage --- */
.home-grid-wrap{
  position:fixed;
  left:0; right:0; bottom:0;
  padding:14px 12px 18px;
  z-index:50;
  pointer-events:none;
}

/* --- Homepage top signs (smaller + tap to zoom) --- */
.home-top-signs{
  position:fixed;
  left:0; right:0; top:10px;
  z-index:60;
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  padding:0 10px;
  pointer-events:none; /* only the images should be clickable */
}
.home-sign{
  width:110px;
  max-width:42vw;
  border-radius:18px;
  box-shadow:0 12px 34px rgba(0,0,0,0.35);
  cursor:pointer;
  transition:transform 180ms ease;
  user-select:none;
  pointer-events:auto;
}
.home-sign:hover{transform:translateY(-2px) scale(1.02)}

#homeSignBackdrop{
  position:fixed;
  inset:0;
  background:transparent;
  display:none;
  z-index:99998;
}
#homeSignBackdrop.active{display:block;}

.home-sign.zoom{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(92vw,560px);
  max-width:92vw;
  z-index:99999;
  border-radius:22px;
  box-shadow:0 22px 60px rgba(0,0,0,0.55);
  filter:none;
  opacity:1;
}

@media(max-width:900px){
  .home-top-signs{
  position:fixed;
  left:0; right:0; top:10px;
  z-index:60;
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  padding:0 10px;
  pointer-events:none; /* only the images should be clickable */
}
  .home-sign{width:115px}
}

.home-grid{
  pointer-events:auto;
  margin:0 auto;
  max-width:1000px;
  display:grid;
  grid-template-columns:repeat(3, minmax(140px, 1fr)); /* lock to 3 per row */
  grid-template-rows:auto auto;                      /* lock to 2 rows */
  gap:14px;
  align-items:stretch;
}

/* Smaller Club Song tile */
#clubSongBtn{
  transform:scale(0.85);
  transform-origin:center;
  align-self:center;
}
#clubSongBtn .tile-img{height:110px;}
#clubSongBtn .tile-label{font-size:1.2rem;padding:12px 12px;}


.tile-btn{
  appearance:none;
  border:none;
  padding:0;
  margin:0;
  width:100%;
  border-radius:22px;
  overflow:hidden;
  cursor:pointer;
  box-shadow:0 14px 40px rgba(0,0,0,0.35);
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.18);
  transition:transform 0.25s ease;
}
.tile-btn:hover{transform:translateY(-4px) scale(1.01)}
.tile-img{
  width:100%;
  height:150px;
  display:block;
  object-fit:cover;
  background:#000;
}
.tile-label{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:14px 14px;
  font-size:1.6rem;
  font-weight:900;
  color:#fff;
  background:rgba(0,0,0,0.55);
}

@media(max-width:900px){
  .home-stage{ height: calc(100vh - 260px); }
  .tile-img{height:130px}
  .tile-label{font-size:1.35rem}
}

.bottom-strip{
  position:fixed;
  left:0; right:0; bottom:0;
  padding:14px 12px 18px;
  z-index:50;
  pointer-events:none; /* allow only inner controls to capture */
}
.bottom-inner{
  pointer-events:auto;
  margin:0 auto;
  max-width:1200px;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  gap:14px;
  flex-wrap:wrap;
  /* invisible "card": no background, no border */
  background:transparent;
}

.bottom-sign{
  width:170px;
  border-radius:18px;
  box-shadow:0 12px 34px rgba(0,0,0,0.35);
}

.bottom-btn{
  margin:0;
  padding:16px 26px;
  font-size:1.4rem;
}

.bottom-song{
  background:#9c27b0;
  margin:0;
  padding:16px 26px;
  font-size:1.4rem;
  animation:bounce 2s infinite;
}

.bottom-thumb{
  position:relative;
  width:180px;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 12px 34px rgba(0,0,0,0.35);
  cursor:pointer;
}
.bottom-thumb img{
  width:100%;
  height:110px;
  object-fit:cover;
  display:block;
}
.bottom-label{
  position:absolute;
  left:10px;
  bottom:8px;
  background:rgba(0,0,0,0.55);
  color:#fff;
  padding:6px 10px;
  border-radius:999px;
  font-weight:900;
  font-size:14px;
}

.bottom-go{
  position:absolute;
  right:10px;
  top:10px;
  padding:10px 18px;
  font-size:1.6rem;
  border-radius:999px;
  margin:0;
}

@media(max-width:900px){
  .home-stage{ height: calc(100vh - 220px); }
  .bottom-sign{ width:140px; }
  .bottom-thumb{ width:160px; }
  .bottom-thumb img{ height:100px; }
}

  
/* --- Adjust bottom thumbnails to match sign visual weight --- */
.bottom-thumb{
  width:220px;              /* match sign size */
}
.bottom-thumb img{
  height:140px;             /* taller image */
}

@media(max-width:900px){
  .bottom-thumb{
    width:180px;
  }
  .bottom-thumb img{
    height:120px;
  }
}

  
/* --- Make PLAYERS + QUIZ images same height as signs --- */
.bottom-thumb{
  width:220px;
  height:220px;           /* match sign height */
}
.bottom-thumb img{
  width:100%;
  height:100%;
  object-fit:cover;
}

@media(max-width:900px){
  .bottom-thumb{
    width:180px;
    height:180px;
  }
}

  
/* =========================
   PENALTY SHOOTOUT STYLES (enhanced)
========================= */
.penalty-wrap{max-width:1100px;text-align:center}
.penalty-topbar{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:10px}
.penalty-banner{
  flex:1;padding:14px 16px;border-radius:16px;
  background:rgba(30,20,10,0.85);border:2px solid rgba(255,255,255,0.20);
  color:#ffcc66;font-weight:1000;letter-spacing:1px;text-transform:uppercase;font-size:1.25rem;
  box-shadow:0 12px 40px rgba(0,0,0,0.45)
}
.penalty-scoreboard{
  width:200px;border-radius:16px;background:rgba(25,25,25,0.85);
  border:2px solid rgba(255,255,255,0.20);color:#fff;padding:10px 12px;
  box-shadow:0 12px 40px rgba(0,0,0,0.45);text-align:left
}
.penalty-scoreboard .sb-row{display:flex;align-items:baseline;justify-content:space-between;gap:10px;font-weight:900;padding:4px 0}
.penalty-scoreboard span{opacity:0.8;font-weight:800}
.penalty-scoreboard strong{font-size:1.2rem}

.penalty-message{font-size:1.15rem;font-weight:900;margin:10px 0 14px;min-height:32px;color:#fff;text-shadow:0 2px 14px rgba(0,0,0,0.55)}
.penalty-message.good{color:#d6ffb7}
.penalty-message.bad{color:#ffb7b7}

.penalty-goal{
  position:relative;width:min(960px,94vw);height:min(520px,58vh);margin:0 auto 14px;
  border-radius:22px;overflow:hidden;border:2px solid rgba(255,255,255,0.18);
  box-shadow:0 18px 55px rgba(0,0,0,0.55);background:#0b1020
}

.stadium-sky{position:absolute;inset:0 0 55% 0;
  background:radial-gradient(circle at 50% 30%, rgba(255,255,255,0.12), transparent 55%),
           linear-gradient(180deg, rgba(20,30,60,0.9), rgba(10,14,30,0.95))}
.stadium-stands{position:absolute;left:0;right:0;top:35%;bottom:26%;
  background:repeating-linear-gradient(90deg, rgba(255,255,255,0.08) 0 10px, rgba(255,255,255,0.03) 10px 20px),
           linear-gradient(180deg, rgba(220,220,220,0.08), rgba(0,0,0,0.35));
  filter:blur(0.3px)}
.pitch{position:absolute;left:0;right:0;bottom:0;height:30%;
  background:repeating-linear-gradient(90deg, rgba(34,197,94,0.35) 0 80px, rgba(34,197,94,0.22) 80px 160px),
           linear-gradient(180deg, rgba(16,185,129,0.20), rgba(0,0,0,0.45))}

.goal-frame{position:absolute;left:10%;right:10%;top:20%;bottom:25%;border-radius:10px}
.goal-frame .post,.goal-frame .crossbar{position:absolute;background:rgba(255,255,255,0.95);box-shadow:0 10px 30px rgba(0,0,0,0.35)}
.goal-frame .post.left{left:0;top:0;bottom:0;width:10px}
.goal-frame .post.right{right:0;top:0;bottom:0;width:10px}
.goal-frame .crossbar{left:0;right:0;top:0;height:10px}
.goal-frame .net{position:absolute;inset:10px;border-radius:10px;opacity:0.9;
  background:repeating-linear-gradient(0deg, rgba(255,255,255,0.18) 0 2px, transparent 2px 18px),
           repeating-linear-gradient(90deg, rgba(255,255,255,0.14) 0 2px, transparent 2px 18px)}

.target{position:absolute;width:86px;height:86px;border-radius:999px;left:50%;top:34%;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle, rgba(255,255,255,0.0) 0 18px, rgba(255,200,60,0.9) 18px 26px, rgba(255,255,255,0) 26px 34px, rgba(255,200,60,0.85) 34px 40px, rgba(255,255,255,0) 40px 100%);
  box-shadow:0 12px 30px rgba(0,0,0,0.35);opacity:0.95}
.t-left{left:25%;top:44%}
.t-centre{left:50%;top:28%}
.t-right{left:75%;top:44%}

.goal-zone{position:absolute;top:0;bottom:0;cursor:pointer;z-index:6}
.goal-zone[data-zone="left"]{left:0;width:33.333%}
.goal-zone[data-zone="centre"]{left:33.333%;width:33.333%}
.goal-zone[data-zone="right"]{right:0;width:33.333%}

.keeper{position:absolute;left:50%;top:54%;transform:translate(-50%,-50%);width:110px;height:110px;z-index:5;
  transition:transform 450ms ease;filter:drop-shadow(0 10px 18px rgba(0,0,0,0.5));user-select:none}
.keeper-svg{width:100%;height:100%}
.ball{position:absolute;left:50%;bottom:10%;transform:translate(-50%,0);width:74px;height:74px;z-index:5;
  transition:transform 650ms cubic-bezier(.2,.9,.2,1);filter:drop-shadow(0 10px 18px rgba(0,0,0,0.5));user-select:none}
.ball-svg{width:100%;height:100%}

.keeper.dive-left{transform:translate(-170%,-50%) rotate(-10deg)}
.keeper.dive-centre{transform:translate(-50%,-70%) scale(1.05)}
.keeper.dive-right{transform:translate(70%,-50%) rotate(10deg)}

.ball.shoot-left{transform:translate(-250%,-260%)}
.ball.shoot-centre{transform:translate(-50%,-300%)}
.ball.shoot-right{transform:translate(150%,-260%)}

@media(max-width:900px){
  .penalty-topbar{flex-direction:column;align-items:stretch}
  .penalty-scoreboard{width:100%}
  .penalty-goal{height:min(520px,62vh)}
  .target{width:70px;height:70px}
  .keeper{width:96px;height:96px}
  .ball{width:64px;height:64px}
}

  

  </style>
</head>
<body>

  <div id="splash">
    <img src="assets/images/splash.jpg">
  </div>

  <audio id="cheer" src="https://cdn.freesound.org/previews/612/612345_5674468-lq.mp3"></audio>
  <audio id="whistle" src="https://cdn.freesound.org/previews/276/276898_5123851-lq.mp3"></audio>
  <audio id="crowd" src="https://cdn.freesound.org/previews/711/711378_5674468-lq.mp3"></audio>
  <audio id="clubSong" src="assets/audio/club-song.mp3"></audio>
  <audio id="beep" src="https://cdn.freesound.org/previews/341/341695_5260877-lq.mp3" preload="auto"></audio>
<div class="container">
    <div class="grid">

<!-- Backdrop for sign zoom -->
<div id="homeSignBackdrop" aria-hidden="true"></div>

<!-- Top signs (tap to zoom) -->
<div class="home-top-signs" aria-label="Club signs">
  <img src="assets/images/green-sign.jpg" class="home-sign" data-home-sign alt="Green sign">
<img src="assets/images/blue-sign.jpg" class="home-sign" data-home-sign alt="Blue sign">
  </div>

<div class="home-stage">
  <!-- empty top area so the background can shine -->
</div>

<!-- Tidy grid homepage actions (Concept 1) -->
<div class="home-grid-wrap" aria-label="Homepage actions">
  <div class="home-grid">

    <button id="videosBtn" class="tile-btn" aria-label="Training Videos">
      <img class="tile-img" src="assets/images/training-videos.jpg" alt="Training Videos">
      <div class="tile-label">Training Videos</div>
    </button>

    <button id="penaltyBtn" class="tile-btn" aria-label="Games" onclick="openPenalty(); playSound('whistle');">
      <img class="tile-img" src="assets/images/games.jpg" alt="Games">
      <div class="tile-label">Games</div>
    </button>

    <button class="tile-btn" aria-label="Players" onclick="openPhotoGallery();playSound('crowd')">
      <img class="tile-img" src="assets/images/team.jpg" alt="Players">
      <div class="tile-label">Players</div>
    </button>

    <button class="tile-btn" aria-label="Quiz" onclick="openQuiz();playSound('whistle')">
      <img class="tile-img" src="assets/images/quiz-card.jpg" alt="Quiz">
      <div class="tile-label">Quiz</div>
    </button>

    <button id="clubSongBtn" class="tile-btn" aria-label="Club Song" onclick="toggleClubSong()">
      <img class="tile-img" src="assets/images/club-song.jpg" alt="Club Song">
      <div class="tile-label" id="clubSongLabel">üé∂ Club Song</div>
    </button>

  </div>
</div>
</div>

  <div id="photoGallery">
    <h2>Team Photos & Moments</h2>
    <div class="gallery-scroll">
      <img src="assets/images/Alfie.jpg">
      <img src="assets/images/Bobby.jpg">
      <img src="assets/images/Caleb.jpg">
      <img src="assets/images/Charlie.jpg">
      <img src="assets/images/Jensen.jpg">
      <img src="assets/images/Kyle.jpg">
      <img src="assets/images/Leo.jpg">
      <img src="assets/images/Logan.jpg">
      <img src="assets/images/Oakley.jpg">
      <img src="assets/images/Thomas.jpg">
      <img src="assets/images/Will.jpg">
      <img src="assets/images/Will-Dog.jpg">
    </div>

    <div id="groupSlideshow" class="slideshow">
      <div class="slideshow-frame">
        <button class="slide-nav" id="prevSlide" aria-label="Previous slide">‚Äπ</button>
        <img id="groupSlideImg" src="assets/images/Group (1).jpg" alt="Group photo slideshow">
        <button class="slide-nav" id="nextSlide" aria-label="Next slide">‚Ä∫</button>
      </div>
      <div class="slideshow-controls">
        <button class="slide-btn" id="toggleSlides">‚è∏ Pause</button>
        <div id="slideCounter" class="slide-counter">1 / 25</div>
      </div>
    </div>

    <button class="back-btn" onclick="closePhotoGallery()">Back to Home</button>
  </div>

  <div id="videosOverlay" class="overlay">
    <div class="overlay-card">
      <h2 style="margin-bottom:30px">Training Videos</h2>
      <button onclick="openMenu('GK')" class="menu-btn">GOALKEEPER</button>
      <button onclick="openMenu('DEF')" class="menu-btn">DEFENCE</button>
      <button onclick="openMenu('MID')" class="menu-btn">MIDFIELD</button>
      <button onclick="openMenu('STR')" class="menu-btn">STRIKER</button>
      <button onclick="openMenu('ALL')" class="menu-btn">ALL PLAYERS</button>
      <button onclick="openMenu('SKL')" class="menu-btn">SKILLS & TRICKS</button>
      <button class="back-btn" onclick="closeOverlay()">Back to Home</button>
    </div>
  </div>

  <div id="menu_ALL" class="videoMenu">
    <h2>All Players</h2>
    <div class="video-grid">
      <div class="video-thumb" onclick="window.open('https://youtu.be/EukKiQxpch8','_blank')">
        <img src="https://i.ytimg.com/vi/EukKiQxpch8/maxresdefault.jpg"><div class="play-icon"></div>
        <div class="video-title">Warm-Up & Team Shape</div>
      </div>
    </div>
    <button class="back-btn" onclick="closeMenu('ALL')">Back</button>
  </div>

  <div id="menu_DEF" class="videoMenu">
    <h2>Defence Training</h2>
    <div class="video-grid">
      <div class="video-thumb" onclick="window.open('https://youtu.be/yREWtO19RQc','_blank')">
        <img src="https://i.ytimg.com/vi/yREWtO19RQc/maxresdefault.jpg"><div class="play-icon"></div>
        <div class="video-title">Defending as a Unit</div>
      </div>
    </div>
    <button class="back-btn" onclick="closeMenu('DEF')">Back</button>
  </div>

  <div id="menu_SKL" class="videoMenu">
    <h2>Skills & Tricks Playlist</h2>
    <div class="video-grid">
      <div class="video-thumb" onclick="window.open('https://youtube.com/playlist?list=PLaSL84U3HNjAzScYPOkRoLm4ZtI0BUXhs','_blank')">
        <img src="https://i.ytimg.com/vi_list/PLaSL84U3HNjAzScYPOkRoLm4ZtI0BUXhs/maxresdefault.jpg"><div class="play-icon"></div>
        <div class="video-title">Full Skills Playlist</div>
      </div>
    </div>
    <button class="back-btn" onclick="closeMenu('SKL')">Back</button>
  </div>

  <div id="menu_GK" class="videoMenu">
    <h2>Goalkeeper Training</h2>
    <button class="back-btn" onclick="closeMenu('GK')">Back</button>
  </div>
  <div id="menu_MID" class="videoMenu">
    <h2>Midfield Training</h2>
    <button class="back-btn" onclick="closeMenu('MID')">Back</button>
  </div>
  <div id="menu_STR" class="videoMenu">
    <h2>Striker Training</h2>
    <button class="back-btn" onclick="closeMenu('STR')">Back</button>
  </div>

  <div id="quizScreen">
    <h2>Mini Quiz ‚Äì Test Your Football Brain!</h2>
    <div id="quizTimer">120</div>
    <div id="quizContent"></div>
    <div id="quizResult" style="display:none;margin-top:10px">
      <div style="font-size:2.2rem;font-weight:900;margin:10px 0">Result</div>
      <div id="quizScoreLine" style="font-size:1.6rem;margin:8px 0"></div>
      <div id="quizBestLine" style="font-size:1.2rem;opacity:0.9;margin:6px 0 16px"></div>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <button id="shareScoreBtn" class="menu-btn" style="background:#16a34a;color:white;width:auto;padding:16px 26px;font-size:1.4rem">Share score</button>
        <button id="copyScoreBtn" class="menu-btn" style="background:#2563eb;color:white;width:auto;padding:16px 26px;font-size:1.4rem">Copy score</button>
        <button id="playAgainBtn" class="menu-btn" style="background:#ffe66d;color:#2d1b69;width:auto;padding:16px 26px;font-size:1.4rem">Play again</button>
      </div>
      <div id="copyHint" style="margin-top:10px;font-size:1rem;opacity:0.85;display:none">Copied ‚úÖ</div>
    </div>

    <button class="back-btn" onclick="closeQuiz()">Back to Home</button>
  </div>

  <div id="imgZoomBackdrop" aria-hidden="true"></div>


<!-- =========================
     PENALTY SHOOTOUT OVERLAY
========================== -->
<div id="penaltyScreen" class="overlay">
  <div class="overlay-content penalty-wrap">
    <div class="penalty-topbar">
      <div class="penalty-banner">CHOOSE WHERE TO SHOOT</div>
      <div class="penalty-scoreboard">
        <div class="sb-row"><span>Shot</span><strong id="penaltyShotInfo">1 / 5</strong></div>
        <div class="sb-row"><span>Score</span><strong id="penaltyScoreInfo">0</strong></div>
      </div>
    </div>

    <div id="penaltyMessage" class="penalty-message">Press Start to begin</div>

    <div id="penaltyGoal" class="penalty-goal" aria-label="Goal - tap to shoot">
      <!-- Visual stadium/goal layers -->
      <div class="stadium-sky"></div>
      <div class="stadium-stands"></div>
      <div class="pitch"></div>

      <div class="goal-frame">
        <div class="net"></div>
        <div class="post left"></div>
        <div class="post right"></div>
        <div class="crossbar"></div>
      </div>

      <!-- Targets -->
      <div class="target t-left" aria-hidden="true"></div>
      <div class="target t-centre" aria-hidden="true"></div>
      <div class="target t-right" aria-hidden="true"></div>

      <!-- Click zones (stay on top, invisible) -->
      <div class="goal-zone" data-zone="left" aria-label="Shoot left"></div>
      <div class="goal-zone" data-zone="centre" aria-label="Shoot centre"></div>
      <div class="goal-zone" data-zone="right" aria-label="Shoot right"></div>

      <!-- Keeper + ball (SVG for cleaner look) -->
      <div id="keeper" class="keeper" aria-hidden="true">
        <svg viewBox="0 0 120 120" class="keeper-svg" role="img" aria-label="Goalkeeper">
          <circle cx="60" cy="28" r="12" fill="rgba(255,220,180,0.95)"/>
          <rect x="44" y="40" width="32" height="38" rx="10" fill="rgba(220,40,40,0.95)"/>
          <rect x="26" y="46" width="20" height="12" rx="6" fill="rgba(220,40,40,0.95)"/>
          <rect x="74" y="46" width="20" height="12" rx="6" fill="rgba(220,40,40,0.95)"/>
          <circle cx="30" cy="52" r="7" fill="rgba(240,240,240,0.95)"/>
          <circle cx="90" cy="52" r="7" fill="rgba(240,240,240,0.95)"/>
          <rect x="48" y="78" width="10" height="26" rx="5" fill="rgba(40,40,40,0.9)"/>
          <rect x="62" y="78" width="10" height="26" rx="5" fill="rgba(40,40,40,0.9)"/>
          <circle cx="53" cy="108" r="6" fill="rgba(20,20,20,0.9)"/>
          <circle cx="67" cy="108" r="6" fill="rgba(20,20,20,0.9)"/>
        </svg>
      </div>

      <div id="ball" class="ball" aria-hidden="true">
        <svg viewBox="0 0 120 120" class="ball-svg" role="img" aria-label="Ball">
          <circle cx="60" cy="60" r="54" fill="#fff"/>
          <circle cx="60" cy="60" r="54" fill="none" stroke="rgba(0,0,0,0.25)" stroke-width="4"/>
          <polygon points="60,32 44,44 50,62 70,62 76,44" fill="#111"/>
          <path d="M44 44 L30 56 L38 76 L50 62 Z" fill="#111"/>
          <path d="M76 44 L90 56 L82 76 L70 62 Z" fill="#111"/>
          <path d="M50 62 L38 76 L52 92 L60 80 L70 62 Z" fill="#111" opacity="0.9"/>
          <path d="M70 62 L60 80 L68 94 L82 76 Z" fill="#111" opacity="0.9"/>
        </svg>
      </div>
    </div>

    <div class="penalty-controls">
      <button class="menu-btn" id="penaltyStartBtn" onclick="startPenaltyGame()">Start</button>
      <button class="menu-btn" id="penaltyAgainBtn" onclick="startPenaltyGame()" style="display:none">Play Again</button>
      <button class="back-btn" onclick="closePenalty()">Back</button>
    </div>
  </div>
</div>

  <script>
    // --- Splash screen: robust hide (works even if autoplay is blocked) ---
    (function(){
      const hideSplash = () => {
        const splash = document.getElementById('splash');
        if(!splash) return;
        splash.style.opacity = '0';
        setTimeout(()=>{ splash.style.display = 'none'; }, 800);
      };
      window.addEventListener('load', () => {
        setTimeout(hideSplash, 4000);
      });
      document.addEventListener('click', (e) => {
        const splash = document.getElementById('splash');
        if(splash && splash.style.display !== 'none') hideSplash();
      }, { once:true });
    })();

    function playSound(id){
      const audio = document.getElementById(id);
      if(audio){
        audio.currentTime = 0;
        audio.volume = 0.8;
        audio.play().catch(()=>{});
      }
    }

    let songPlayed = false;

    setTimeout(()=>{
      playSound('cheer');
      document.getElementById('splash').style.opacity = '0';
      setTimeout(()=>{
        document.getElementById('splash').style.display = 'none';
        if (!songPlayed) {
          playSound('clubSong');
          playSound('crowd');
          songPlayed = true;
          const label = document.getElementById('clubSongLabel');
          if (label) label.textContent = '‚è∏ Pause Club Song';
        }
      },1500);
    },4000);

    function toggleClubSong(){
      const song = document.getElementById('clubSong');
      const label = document.getElementById('clubSongLabel');
      if (song.paused) {
        song.play().catch(()=>{});
        playSound('crowd');
        if (label) label.textContent = '‚è∏ Pause Club Song';
      } else {
        song.pause();
        if (label) label.textContent = 'üé∂ Play Club Song üé∂';
      }
    }

    document.getElementById('videosBtn').onclick = () => {
      document.getElementById('videosOverlay').classList.add('active');
      playSound('crowd');
    };

    function closeOverlay(){
      document.getElementById('videosOverlay').classList.remove('active');
    }
    function openMenu(cat){
      document.getElementById('menu_'+cat).classList.add('active');
    }
    function closeMenu(cat){
      document.getElementById('menu_'+cat).classList.remove('active');
    }

    // --- Group slideshow (25 images) ---
    const GROUP_SLIDES = Array.from({length:25}, (_,i)=>`assets/images/Group (${i+1}).jpg`);
    let groupSlideIndex = 0;
    let groupSlideInterval = null;
    let groupSlidePlaying = true;
    let imageZoomReady = false;

    function renderGroupSlide(){
      const img = document.getElementById('groupSlideImg');
      const counter = document.getElementById('slideCounter');
      if (!img || !counter) return;
      img.src = GROUP_SLIDES[groupSlideIndex];
      counter.textContent = `${groupSlideIndex+1} / ${GROUP_SLIDES.length}`;
    }

    function nextGroupSlide(){
      groupSlideIndex = (groupSlideIndex + 1) % GROUP_SLIDES.length;
      renderGroupSlide();
    }

    function prevGroupSlide(){
      groupSlideIndex = (groupSlideIndex - 1 + GROUP_SLIDES.length) % GROUP_SLIDES.length;
      renderGroupSlide();
    }

    function startGroupSlides(){
      stopGroupSlides();
      groupSlidePlaying = true;
      const toggleBtn = document.getElementById('toggleSlides');
      if (toggleBtn) toggleBtn.textContent = '‚è∏ Pause';
      groupSlideInterval = setInterval(nextGroupSlide, 3500);
    }

    function stopGroupSlides(){
      if (groupSlideInterval){
        clearInterval(groupSlideInterval);
        groupSlideInterval = null;
      }
    }

    function toggleGroupSlides(){
      const toggleBtn = document.getElementById('toggleSlides');
      if (groupSlidePlaying){
        groupSlidePlaying = false;
        stopGroupSlides();
        if (toggleBtn) toggleBtn.textContent = '‚ñ∂Ô∏è Play';
      }else{
        startGroupSlides();
      }
    }

    function initGroupSlideshowControls(){
      const prevBtn = document.getElementById('prevSlide');
      const nextBtn = document.getElementById('nextSlide');
      const toggleBtn = document.getElementById('toggleSlides');
      if (prevBtn) prevBtn.onclick = () => { prevGroupSlide(); };
      if (nextBtn) nextBtn.onclick = () => { nextGroupSlide(); };
      if (toggleBtn) toggleBtn.onclick = () => { toggleGroupSlides(); };

      groupSlideIndex = 0;
      renderGroupSlide();
      startGroupSlides();
    }

    // --- Click any photo to zoom to half-screen ---
    let currentZoomImg = null;

    function clearZoom(){
      const backdrop = document.getElementById('imgZoomBackdrop');
      if (currentZoomImg){
        currentZoomImg.classList.remove('zoom-half');
        currentZoomImg = null;
      }
      if (backdrop) backdrop.classList.remove('active');
    }

    function toggleZoom(img){
      const backdrop = document.getElementById('imgZoomBackdrop');
      if (!img) return;

      if (currentZoomImg && currentZoomImg !== img){
        currentZoomImg.classList.remove('zoom-half');
      }

      const willZoom = !img.classList.contains('zoom-half');
      clearZoom();
      if (willZoom){
        img.classList.add('zoom-half');
        currentZoomImg = img;
        if (backdrop) backdrop.classList.add('active');
      }
    }

    function initImageZoom(){
      const gallery = document.getElementById('photoGallery');
      const backdrop = document.getElementById('imgZoomBackdrop');
      if (!gallery) return;

      gallery.addEventListener('click', (e) => {
        const img = e.target && e.target.tagName === 'IMG' ? e.target : null;
        if (img){
          e.preventDefault();
          e.stopPropagation();
          toggleZoom(img);
        }
      });

      if (backdrop){
        backdrop.addEventListener('click', clearZoom);
      }

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') clearZoom();
      });
    }

    function openPhotoGallery(){
      document.getElementById('photoGallery').classList.add('active');
      initGroupSlideshowControls();
      if(!imageZoomReady){ initImageZoom(); imageZoomReady = true; }
    }
    function closePhotoGallery(){document.getElementById('photoGallery').classList.remove('active');}

    // --- Homepage signs: tap to zoom ---
    let currentHomeSign = null;

    function clearHomeSignZoom(){
      const backdrop = document.getElementById('homeSignBackdrop');
      if(currentHomeSign){
        currentHomeSign.classList.remove('zoom');
        currentHomeSign = null;
      }
      if(backdrop) backdrop.classList.remove('active');
    }

    function toggleHomeSignZoom(img){
      if(!img) return;
      const willZoom = !img.classList.contains('zoom');
      clearHomeSignZoom();
      if(willZoom){
        img.classList.add('zoom');
        currentHomeSign = img;
        const backdrop = document.getElementById('homeSignBackdrop');
        if(backdrop) backdrop.classList.add('active');
      }
    }

    function initHomeSignZoom(){
      const signs = Array.from(document.querySelectorAll('[data-home-sign]'));
      const backdrop = document.getElementById('homeSignBackdrop');
      if(signs.length === 0) return;

      signs.forEach(img => {
        img.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          toggleHomeSignZoom(img);
        });
      });

      if(backdrop){
        backdrop.addEventListener('click', clearHomeSignZoom);
      }

      document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape') clearHomeSignZoom();
      });
    }

    const QUIZZES = [
      {q:"Who stands in goal and tries to stop shots?",choices:['Striker','Goalkeeper','Defender'],ans:"Goalkeeper"},
      {q:"Which players try to score goals?",choices:['Goalkeepers','Defenders','Forwards'],ans:"Forwards"},
      {q:"Who helps move the ball from defence to attack?",choices:['Goalkeeper','Midfielders','Strikers'],ans:"Midfielders"},
      {q:"What do we call it when you kick the ball hard away from danger?",choices:['A clearance','A nutmeg','A rainbow flick'],ans:"A clearance"},
      {q:"How many players are on a 7-a-side team (including goalkeeper)?",choices:['5','7','11'],ans:"7"},
      {q:"What should you do when your teammate has the ball?",choices:['Stand still','Make a run into space','Shout at them'],ans:"Make a run into space"},
      {q:"What is it called when the other team kicks the ball from the side after it goes out?",choices:['Corner kick','Goal kick','Throw-in'],ans:"Throw-in"},
      {q:"If the ball goes out behind the goal after touching a defender last, what do we get?",choices:['Goal kick','Corner kick','Free kick'],ans:"Corner kick"},
      {q:"What should you do when you win the ball back?",choices:['Kick it as hard as you can','Look for a teammate','Run with it forever'],ans:"Look for a teammate"},
      {q:"How do we start the game?",choices:['With a throw-in','With a kick-off','With a goal kick'],ans:"With a kick-off"},
      {q:"What is the offside rule in simple terms?",choices:['You can‚Äôt be behind the last defender when the ball is passed','You can‚Äôt touch the ball with your hands','You have to stay in your half'],ans:"You can‚Äôt be behind the last defender when the ball is passed"},
      {q:"What colour card means 'stop playing badly'?",choices:['Yellow card','Red card','Green card'],ans:"Yellow card"},
      {q:"What colour card means you have to leave the pitch?",choices:['Yellow card','Red card','Blue card'],ans:"Red card"},
      {q:"What do we call it when you gently lift the ball over an opponent?",choices:['A chip','A header','A volley'],ans:"A chip"},
      {q:"What should you always do before a game?",choices:['Warm up','Eat lots of sweets','Sit down and wait'],ans:"Warm up"},
      {q:"What‚Äôs the most important thing in football?",choices:['Winning every game','Having fun and trying your best','Scoring the most goals'],ans:"Having fun and trying your best"},
      {q:"What do we call a pass that goes behind the defence for a teammate to run onto?",choices:['A through ball','A cross','A back pass'],ans:"A through ball"},
      {q:"When should you use a header?",choices:['To pass or score with your head','To kick the ball harder','To stop the ball with your hands'],ans:"To pass or score with your head"},
      {q:"What does 'pressing' mean?",choices:['Running at the player with the ball to win it back','Standing still','Passing backwards'],ans:"Running at the player with the ball to win it back"},
      {q:"Why do we spread out on the pitch?",choices:['To make space and give teammates options','To stand close together','To make it easier for the other team'],ans:"To make space and give teammates options"}
    ];

    let quizTimerInterval;
    let quizTimeLeft = 120;

    function openQuiz(){
      document.getElementById('quizScreen').classList.add('active');

      const resultEl = document.getElementById('quizResult');
      const quizContent = document.getElementById('quizContent');
      if (resultEl) resultEl.style.display = 'none';
      if (quizContent) quizContent.style.display = 'block';

      startFullQuiz();
      startQuizTimer();
    }

    function closeQuiz(){
      document.getElementById('quizScreen').classList.remove('active');
      clearInterval(quizTimerInterval);

      const resultEl = document.getElementById('quizResult');
      const quizContent = document.getElementById('quizContent');
      if (resultEl) resultEl.style.display = 'none';
      if (quizContent) quizContent.style.display = 'block';
    }

    function startQuizTimer(){
      let timeLeft = 120;
      quizTimeLeft = 120;
      document.getElementById('quizTimer').textContent = timeLeft;
      quizTimerInterval = setInterval(()=>{
        timeLeft--;
        quizTimeLeft = timeLeft;
        document.getElementById('quizTimer').textContent = timeLeft;
        if (timeLeft <= 30) document.getElementById('quizTimer').classList.add('warn');

        if(timeLeft <= 10){
          document.getElementById('quizTimer').classList.remove('warn');
          document.getElementById('quizTimer').classList.add('danger');
          document.getElementById('quizTimer').style.color = '#ff4757';
        }
        if (timeLeft <= 5 && timeLeft > 0) {
          const beep = document.getElementById('beep');
          if (beep) {
            beep.currentTime = 0;
            beep.volume = 0.7;
            beep.play().catch(()=>{});
          }
        }

        if(timeLeft <= 0){
          clearInterval(quizTimerInterval);
          submitFullQuiz(true);
        }
      },1000);
    }

    function startFullQuiz(){
      let html = '';
      QUIZZES.forEach((q,i)=>{
        html += `<div class="quiz-question">${i+1}. ${q.q}</div><div class="quiz-options">`;
        const shuffled = [...q.choices].sort(() => 0.5 - Math.random());
        shuffled.forEach(c => html += `<label><input type="radio" name="q${i}" value="${c}"> ${c}</label>`);
        html += `</div><hr style="border-color:rgba(255,255,255,0.2);margin:40px 0">`;
      });
      html += `<button onclick="submitFullQuiz()" style="background:#16a34a;padding:18px 50px;font-size:22px;border-radius:50px;margin:30px 0">Submit Answers!</button>`;
      document.getElementById('quizContent').innerHTML = html;
    }

    function getQuizHistory(){
      try{
        return JSON.parse(localStorage.getItem('hjfc_quiz_history') || '[]');
      }catch(e){
        return [];
      }
    }

    function saveQuizResult(entry){
      const history = getQuizHistory();
      history.unshift(entry);
      localStorage.setItem('hjfc_quiz_history', JSON.stringify(history.slice(0,20)));
    }

    function getBestScore(total){
      const history = getQuizHistory();
      let best = 0;
      history.forEach(h => { if (h && typeof h.score === 'number') best = Math.max(best, h.score); });
      return best;
    }

    function buildShareText(entry){
      const mins = Math.floor(entry.seconds / 60);
      const secs = entry.seconds % 60;
      const timeStr = mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;
      return `üèÜ Hibaldstow Juniors Quiz
I scored ${entry.score}/${entry.total} in ${timeStr}! ‚öΩüî•`;
    }

    async function shareText(text){
      if (navigator.share){
        try{
          await navigator.share({ text });
          return true;
        }catch(e){}
      }
      return false;
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(e){
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.setAttribute('readonly','');
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        try{ document.execCommand('copy'); }catch(err){}
        document.body.removeChild(ta);
        return true;
      }
    }

    function showQuizResultUI(entry){
      const resultEl = document.getElementById('quizResult');
      const scoreLine = document.getElementById('quizScoreLine');
      const bestLine = document.getElementById('quizBestLine');
      const shareBtn = document.getElementById('shareScoreBtn');
      const copyBtn = document.getElementById('copyScoreBtn');
      const playAgainBtn = document.getElementById('playAgainBtn');
      const copyHint = document.getElementById('copyHint');

      if(!resultEl) return;

      const quizContent = document.getElementById('quizContent');
      if (quizContent) quizContent.style.display = 'none';
      resultEl.style.display = 'block';

      const mins = Math.floor(entry.seconds / 60);
      const secs = entry.seconds % 60;
      const timeStr = mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;

      scoreLine.textContent = entry.timeUp
        ? `Time‚Äôs up! You got ${entry.score} out of ${entry.total}. (${timeStr})`
        : `You got ${entry.score} out of ${entry.total}! (${timeStr})`;

      const best = getBestScore(entry.total);
      bestLine.textContent = `Best score so far on this device: ${best}/${entry.total}`;

      const shareMsg = buildShareText(entry);

      shareBtn.onclick = async () => {
        const ok = await shareText(shareMsg);
        if (!ok){
          const copied = await copyText(shareMsg);
          if (copied){
            copyHint.style.display = 'block';
            setTimeout(()=>copyHint.style.display='none', 1200);
          }
        }
      };

      copyBtn.onclick = async () => {
        const copied = await copyText(shareMsg);
        if (copied){
          copyHint.style.display = 'block';
          setTimeout(()=>copyHint.style.display='none', 1200);
        }
      };

      playAgainBtn.onclick = () => {
        resultEl.style.display = 'none';
        if (quizContent) quizContent.style.display = 'block';
        startFullQuiz();
        startQuizTimer();
      };
    }

    function submitFullQuiz(timeUp = false){
      clearInterval(quizTimerInterval);

      let score = 0;
      QUIZZES.forEach((q,i)=>{
        const sel = document.querySelector(`input[name="q${i}"]:checked`);
        if(sel && sel.value === q.ans) score++;
      });

      playSound('cheer');

      const totalSeconds = 180;
      const secondsSpent = Math.max(0, totalSeconds - (typeof quizTimeLeft === 'number' ? quizTimeLeft : 0));

      const entry = {
        score,
        total: QUIZZES.length,
        seconds: secondsSpent,
        timeUp: !!timeUp,
        ts: new Date().toISOString()
      };

      saveQuizResult(entry);
      showQuizResultUI(entry);
    }

/* =========================
   PENALTY SHOOTOUT LOGIC
========================= */
let penaltyShot = 1;
let penaltyScore = 0;
const PENALTY_TOTAL = 5;
let penaltyLocked = false;

function openPenalty(){
  document.getElementById('penaltyScreen').classList.add('active');
  resetPenaltyUI();
}

function closePenalty(){
  document.getElementById('penaltyScreen').classList.remove('active');
  penaltyLocked = false;
}

function resetPenaltyUI(){
  penaltyShot = 1;
  penaltyScore = 0;
  penaltyLocked = false;

  const startBtn = document.getElementById('penaltyStartBtn');
  const againBtn = document.getElementById('penaltyAgainBtn');
  if(startBtn) startBtn.style.display = 'inline-block';
  if(againBtn) againBtn.style.display = 'none';

  document.getElementById('penaltyShotInfo').textContent = `Shot ${penaltyShot} / ${PENALTY_TOTAL}`;
  document.getElementById('penaltyScoreInfo').textContent = `Score: ${penaltyScore}`;
  setPenaltyMessage('Press Start to begin', '');

  resetKeeperBall();
}

function startPenaltyGame(){
  penaltyShot = 1;
  penaltyScore = 0;
  penaltyLocked = false;

  const startBtn = document.getElementById('penaltyStartBtn');
  const againBtn = document.getElementById('penaltyAgainBtn');
  if(startBtn) startBtn.style.display = 'none';
  if(againBtn) againBtn.style.display = 'none';

  document.getElementById('penaltyShotInfo').textContent = `Shot ${penaltyShot} / ${PENALTY_TOTAL}`;
  document.getElementById('penaltyScoreInfo').textContent = `Score: ${penaltyScore}`;
  setPenaltyMessage('Tap LEFT / CENTRE / RIGHT to shoot', '');

  resetKeeperBall();
}

function setPenaltyMessage(text, mood){
  const el = document.getElementById('penaltyMessage');
  el.textContent = text;
  el.classList.remove('good','bad');
  if(mood) el.classList.add(mood);
}

function resetKeeperBall(){
  const keeper = document.getElementById('keeper');
  const ball = document.getElementById('ball');
  keeper.classList.remove('dive-left','dive-centre','dive-right');
  ball.classList.remove('shoot-left','shoot-centre','shoot-right');
}

function randomZone(){
  const zones = ['left','centre','right'];
  return zones[Math.floor(Math.random()*zones.length)];
}

function applyDive(zone){
  const keeper = document.getElementById('keeper');
  keeper.classList.remove('dive-left','dive-centre','dive-right');
  keeper.classList.add(`dive-${zone}`);
}

function applyShot(zone){
  const ball = document.getElementById('ball');
  ball.classList.remove('shoot-left','shoot-centre','shoot-right');
  ball.classList.add(`shoot-${zone}`);
}

function takePenalty(playerZone){
  if(penaltyLocked) return;

  const startBtn = document.getElementById('penaltyStartBtn');
  if(startBtn && startBtn.style.display !== 'none') return;

  penaltyLocked = true;
  resetKeeperBall();

  const keeperZone = randomZone(); // Option A: pure random dive

  applyShot(playerZone);
  setTimeout(()=>applyDive(keeperZone), 80);

  const isGoal = playerZone !== keeperZone;

  playSound('whistle');

  setTimeout(()=>{
    if(isGoal){
      penaltyScore++;
      setPenaltyMessage('GOAL!!! üéâ', 'good');
      playSound('cheer');
    }else{
      setPenaltyMessage('SAVED! üß§', 'bad');
      playSound('crowd');
    }
    document.getElementById('penaltyScoreInfo').textContent = `Score: ${penaltyScore}`;
  }, 700);

  setTimeout(()=>{
    penaltyShot++;
    if(penaltyShot > PENALTY_TOTAL){
      finishPenaltyGame();
      return;
    }
    document.getElementById('penaltyShotInfo').textContent = `Shot ${penaltyShot} / ${PENALTY_TOTAL}`;
    setPenaltyMessage('Tap LEFT / CENTRE / RIGHT to shoot', '');
    resetKeeperBall();
    penaltyLocked = false;
  }, 1400);
}

function finishPenaltyGame(){
  setPenaltyMessage(`Final score: ${penaltyScore} / ${PENALTY_TOTAL}`, 'good');
  const againBtn = document.getElementById('penaltyAgainBtn');
  if(againBtn) againBtn.style.display = 'inline-block';
  penaltyLocked = true;
}

(function(){
  document.addEventListener('DOMContentLoaded', () => {
    // Homepage sign zoom
    try{ initHomeSignZoom(); }catch(e){}

    const goal = document.getElementById('penaltyGoal');
    if(!goal) return;
    goal.addEventListener('click', (e) => {
      const zoneEl = e.target.closest('.goal-zone');
      if(!zoneEl) return;
      takePenalty(zoneEl.getAttribute('data-zone'));
    });
  });
})();

  </script>
</body>
</html>